import"./assets/modulepreload-polyfill-B5Qt9EMX.js";/* empty css                      */import{a as l}from"./assets/vendor-DTDbZ_Ro.js";const d="5cd3b967f25ca5ea88c6b3955d7951c5",m="https://api.themoviedb.org/3",h=`${m}/genre/movie/list`,f=`${m}/discover/movie`;async function y(){try{return(await l.get(h,{params:{api_key:d}})).data.genres}catch(e){throw console.error("Ошибка загрузки жанров:",e),e}}async function p(e,r=1,n=15){try{return(await l.get(f,{params:{api_key:d,with_genres:e,page:r}})).data.results}catch(t){throw console.error("Ошибка загрузки фильмов:",t),t}}function E(e,r){r.innerHTML="",e.forEach(n=>{const t=document.createElement("button");t.className="genres-list-button",t.textContent=n.name,t.dataset.genreId=n.id,r.appendChild(t)})}function u(e,r){if(e.length===0){r.innerHTML="<p>Фильмы не найдены.</p>";return}e.forEach(n=>{const t=document.createElement("li");t.className="movies-list-item",t.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w200${n.poster_path}" alt="${n.title}" class="movies-item-img">
      <h3 class="movies-item-title">${n.title}</h3>
    `,r.insertAdjacentElement("beforeend",t)})}const i=document.querySelector(".genresContainer"),c=document.querySelector(".moviesContainer"),o=document.getElementById("load-btn");let s=1,a=null,g=15;async function b(){try{const e=await y();E(e,i),i.addEventListener("click",async r=>{if(r.target.classList.contains("genres-list-button")){a=r.target.dataset.genreId,s=1,o.classList.replace("load-more-hidden","btn"),c.innerHTML="";try{const n=await p(a,s,g);u(n,c)}catch(n){console.error("Ошибка при загрузке фильмов:",n)}}})}catch(e){console.error("Ошибка инициализации приложения:",e)}}b();o.addEventListener("click",L);async function L(){if(a){o.classList.replace("btn","load-more-hidden"),s+=1;try{const e=await p(a,s,g);u(e,c),o.classList.replace("load-more-hidden","btn")}catch(e){console.log("Ошибка при загрузке следующих фильмов:",e)}finally{o.disabled=!1}}}
//# sourceMappingURL=page-2.js.map
