import"./assets/top-link-W8oiD2v0.js";import{a as m}from"./assets/vendor-DTDbZ_Ro.js";const u="5cd3b967f25ca5ea88c6b3955d7951c5",g="https://api.themoviedb.org/3",f=`${g}/genre/movie/list`,v=`${g}/discover/movie`;async function b(){try{return(await m.get(f,{params:{api_key:u}})).data.genres}catch(e){throw console.error("Ошибка загрузки жанров:",e),e}}async function p(e,n=1,o=15){try{return(await m.get(v,{params:{api_key:u,with_genres:e,page:n}})).data.results}catch(t){throw console.error("Ошибка загрузки фильмов:",t),t}}function E(e,n){n.innerHTML="",e.forEach(o=>{const t=document.createElement("button");t.className="genres-list-button",t.textContent=o.name,t.dataset.genreId=o.id,n.appendChild(t)})}function h(e,n){if(e.length===0){n.innerHTML="<p>Фильмы не найдены.</p>";return}e.forEach(o=>{const t=document.createElement("li");t.className="movies-list-item",t.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w200${o.poster_path}" alt="${o.title}" class="movies-item-img">
      <h3 class="movies-item-title">${o.title}</h3>
    `,n.insertAdjacentElement("beforeend",t)})}const d=document.querySelector(".genresContainer"),a=document.querySelector(".moviesContainer"),s=document.getElementById("load-btn");let i=1,c=null,y=15;async function L(){try{const e=await b();E(e,d),d.addEventListener("click",async n=>{if(n.target.classList.contains("genres-list-button")){document.querySelectorAll(".genres-list-button").forEach(t=>t.classList.remove("genres-activated")),window.scrollTo({top:0,behavior:"smooth"}),n.target.classList.add("genres-activated"),c=n.target.dataset.genreId,i=1,s.classList.replace("load-more-hidden","btn"),a.innerHTML="";try{const t=await p(c,i,y);h(t,a)}catch(t){console.error("Ошибка при загрузке фильмов:",t)}}})}catch(e){console.error("Ошибка инициализации приложения:",e)}}L();s.addEventListener("click",w);async function w(){if(c){s.classList.replace("btn","load-more-hidden"),i+=1;try{const e=await p(c,i,y);h(e,a);const o=document.querySelector(".movies-list-item").getBoundingClientRect().height;window.scrollBy({left:0,top:o,behavior:"smooth"}),s.classList.replace("load-more-hidden","btn")}catch(e){console.log("Ошибка при загрузке следующих фильмов:",e)}finally{s.disabled=!1}}}const l=document.querySelector(".dropdown"),C=document.querySelector(".dropdown-button"),r=document.querySelector(".genresContainer");document.querySelectorAll(".genres-list-button");l.addEventListener("mouseover",function(){r.style.display="flex"});l.addEventListener("mouseleave",function(){r.style.display="none"});document.addEventListener("click",function(e){l.contains(e.target)||(r.style.display="none")});r.addEventListener("click",function(e){e.target&&e.target.classList.contains("genres-list-button")&&(C.textContent=e.target.textContent,r.style.display="none")});
//# sourceMappingURL=page-2.js.map
