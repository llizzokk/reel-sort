import"./assets/top-link-2D5TQWkj.js";import{a as h}from"./assets/vendor-C0Nsn3Ff.js";const u="https://api.themoviedb.org/3",p="/movie/top_rated",g="/search/movie",y="5cd3b967f25ca5ea88c6b3955d7951c5",m=document.querySelector(".moviesContainer"),s=document.getElementById("top-load-btn"),f=document.querySelector(".top-form"),a=document.querySelector(".loader-container"),o=document.querySelector(".error");let n=1,c="";async function l(e="",r=1){const t=e?g:p;try{a.style.display="block";const{data:i}=await h(`${u}${t}`,{params:{api_key:y,query:e,page:r}});return s.classList.replace("load-more-hidden","btn"),i.results}catch(i){return console.log(i.message),o.classList.replace("error-hidden","error-message"),[]}finally{a.style.display="none"}}(async function(){try{const r=await l();d(r)}catch(r){console.log(r.message),o.classList.replace("error-hidden","error-message")}})();function v(e){return e.map(({poster_path:r,title:t})=>`<li class="movies-list-item">
          <img src="https://image.tmdb.org/t/p/w200${r}" alt="${t}" class="movies-item-img" width="234" height="351">
          <h3 class="movies-item-title">${t}</h3>
      </li>`).join("")}function d(e){if(!e||e.length===0){o.classList.replace("error-hidden","error-message");return}o.classList.replace("error-message","error-hidden");const r=v(e);m.insertAdjacentHTML("beforeend",r)}s.addEventListener("click",L);f.addEventListener("submit",b);async function L(){s.classList.replace("btn","load-more-hidden"),s.disabled=!0,n+=1;try{const e=await l(c,n);d(e);const r=document.querySelector(".movies-list-item");if(r){const t=r.getBoundingClientRect().height;window.scrollBy({left:0,top:t,behavior:"smooth"})}}catch(e){console.log(e.message),o.classList.replace("error-hidden","error-message")}finally{s.classList.replace("load-more-hidden","btn"),s.disabled=!1}}async function b(e){e.preventDefault();const r=e.currentTarget.elements.search.value.trim();r!==c&&(c=r,n=1,m.innerHTML=""),a.classList.remove("hidden"),s.classList.replace("btn","load-more-hidden");try{const t=await l(r,n);d(t),t.length>0&&s.classList.replace("load-more-hidden","btn")}catch(t){console.log(t.message),o.classList.replace("error-hidden","error-message")}finally{a.classList.add("hidden"),e.target.elements.search.value=""}}
//# sourceMappingURL=page-3.js.map
